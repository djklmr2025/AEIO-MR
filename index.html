// En tu p√°gina de login exitoso
const urlParams = new URLSearchParams(window.location.search);
const returnUrl = urlParams.get('return_url');
const appOrigin = urlParams.get('app_origin');

if (returnUrl && appOrigin) {
    // Si es popup mode
    if (urlParams.get('mode') === 'popup') {
        window.opener.postMessage({
            type: 'LOGIN_SUCCESS',
            token: 'tu_token_aqui',
            user: userData
        }, appOrigin);
        window.close();
    } else {
        // Si es redirect
        window.location.href = `${returnUrl}?token=${token}&user=${encodeURIComponent(JSON.stringify(userData))}`;
    }
}